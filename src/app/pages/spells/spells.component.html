<app-navbar></app-navbar>
<section class="spells">
  <div class="spells__wrapper">
    <div class="spells__container">
      <form class="form" [formGroup]="searchForm" (ngSubmit)="onSubmit()">
        <div class="form__wrapper">
          <div class="form__group">
            <label for="classes">Class</label>
            <input id="classes" formControlName="classes" type="text" />
          </div>

          <div class="form__group">
            <label for="name">Name</label>
            <input id="name" formControlName="name" type="text" />
          </div>

          <div class="form__group">
            <label for="level">Level</label>
            <input id="level" formControlName="level" type="text" />
          </div>

          <div class="form__group">
            <label for="castingTime">Casting Time</label>
            <input id="castingTime" formControlName="castingTime" type="text" />
          </div>

          <div class="form__group">
            <label for="school">School</label>
            <input id="school" formControlName="spellSchool" type="text" />
          </div>

          <div class="form__controll">
            <button type="submit" [disabled]="searchForm.invalid">
              Submit
            </button>

            <span (click)="resetForm()">Reset</span>
          </div>
        </div>
      </form>

      <table mat-table [dataSource]="dataSource.data" class="mat-elevation-z8">
        <ng-container matColumnDef="level">
          <th mat-header-cell *matHeaderCellDef>Level</th>
          <td mat-cell *matCellDef="let spell">{{ spell.level }}</td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td
            mat-cell
            *matCellDef="let spell"
            (click)="onClickSpell(spell.index)"
            class="clickable"
          >
            {{ spell.name }}
          </td>
        </ng-container>

        <ng-container matColumnDef="casting">
          <th mat-header-cell *matHeaderCellDef>Casting Time</th>

          <td mat-cell *matCellDef="let spell">{{ spell.casting_time }}</td>
        </ng-container>

        <ng-container matColumnDef="duration">
          <th mat-header-cell *matHeaderCellDef>Duration</th>
          <td mat-cell *matCellDef="let spell">{{ spell.duration }}</td>
        </ng-container>

        <ng-container matColumnDef="range">
          <th mat-header-cell *matHeaderCellDef>Range/Area</th>
          <td mat-cell *matCellDef="let spell">{{ spell.range }}</td>
        </ng-container>

        <ng-container matColumnDef="attack">
          <th mat-header-cell *matHeaderCellDef>Attack/Save</th>
          <td mat-cell *matCellDef="let spell">{{ spell.attack_type }}</td>
        </ng-container>

        <ng-container matColumnDef="damage">
          <th mat-header-cell *matHeaderCellDef>Damage/Effect</th>
          <td mat-cell *matCellDef="let spell">
            <p>{{ spell.damage?.damage_type?.name }}</p>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  </div>
</section>
